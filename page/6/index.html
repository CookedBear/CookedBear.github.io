<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>sin</title><meta name="author" content="CookedBear"><meta name="copyright" content="CookedBear"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="sin">
<meta property="og:url" content="https://cookedbear.github.io/page/6/index.html">
<meta property="og:site_name" content="sin">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305132152908.jpg">
<meta property="article:author" content="CookedBear">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305132152908.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://cookedbear.github.io/page/6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":150},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'sin',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-03-23 02:26:41'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/center-atom.css" ><meta name="generator" content="Hexo 5.4.2"></head><body>
    <div id='loader'>
        
        <div class="loading-left-bg"></div>
        <div class="loading-right-bg"></div>
        <div class="spinner-box">
            <div class="configure-border-1">
                <div class="configure-core"></div>
            </div>
            <div class="configure-border-2">
                <div class="configure-core"></div>
            </div>
            <div class="loading-word">加载中...</div>
        </div>
        
    </div>
        
    <script>
        var endLoading = function () {
        document.body.style.overflow = 'auto';
        document.getElementById('loader').classList.add("loading");
        }
        window.addEventListener('load',endLoading);
    </script>
    <div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305132152908.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 小工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:80/"><span> bdpan</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:81/"><span> 25時生成器</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:9667/"><span> 程序员备忘录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background: transparent"><nav id="nav"><span id="blog-info"><a href="/" title="sin"><span class="site-name">sin</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 小工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:80/"><span> bdpan</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:81/"><span> 25時生成器</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:9667/"><span> 程序员备忘录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">sin</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/CookedBear" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/p/60484.html" title="BUAA-OS-2023-Lab4-Report"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171232980.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-2023-Lab4-Report"></a></div><div class="recent-post-info"><a class="article-title" href="/p/60484.html" title="BUAA-OS-2023-Lab4-Report">BUAA-OS-2023-Lab4-Report</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-17T05:30:47.000Z" title="发表于 2023-04-17 13:30:47">2023-04-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a></span></div><div class="content"> 
BUAA-OS-2023-Lab4-ReportThinking 4.1
  思考并回答下面的问题：
  内核在保存现场的时候是如何避免破坏通用寄存器的？
  系统陷入内核调用后可以直接从当时的$a0-$a3 参数寄存器中得到用户调用msyscall留下的信息吗？
  我们是怎么做到让sys 开头的函数“认为”我们提供了和用户调用msyscall 时同样的参数的？
  内核处理系统调用的过程对Trapframe 做了哪些更改？这种修改对应的用户态的变化是什么？


 在系统发生异常时跳入异常分发程序时，会先调用 SAVE_ALL 宏定义，把所有寄存器（用户态现场）保存在内核栈 KSTACKTOP 下。最后将 sp寄存器指向保存的这个栈帧。这样既能保护用户态时通用寄存器的值不被改变，同样也能在内核态中便捷地调用每个寄存器的值
 可以直接调用。系统调用 msyscall 时只通过 SAVE_ALL将寄存器的值复制到了内核栈中，但对寄存器中的值没有做任何处理，仍然保持着用户态进入时的状态。所以这时参数寄存器内数值仍然可用。
 在 do_syscall 函数中，我们通过系统调用向量 sys ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/p/45960.html" title="BUAA-OS-Probe-Lab3"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171223110.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-Probe-Lab3"></a></div><div class="recent-post-info"><a class="article-title" href="/p/45960.html" title="BUAA-OS-Probe-Lab3">BUAA-OS-Probe-Lab3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-15T16:59:10.000Z" title="发表于 2023-04-16 00:59:10">2023-04-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/MOS-Probe/">MOS Probe</a></span></div><div class="content">Lab3 - 进程与异常Lab3 中主要涉及到以下内容：

  进程的创建
  时钟中断与内核态
  进程调度与进程切换
  数据进程控制块 Env

进程控制块与初始化
  由于没有在 MOS 操作系统中实现线程，所以进程既是基本的分配单元，也是基本的执行单元。
  进程是一个活动中的实体，拥有自己的虚拟地址空间。
  程序是非活动的实体，执行中的程序就是进程

进程控制块 - PCBstruct Env &#123;    struct Trapframe env_tf;// 保存上下文环境，定义于 trap.h 中    LIST_ENTRY(Env) env_link;// 构建空闲进程链表 env_free_link    u_int env_id;// 进程标识符    u_int env_parent_id;// 父进程的进程 id    u_int env_status;// 进程块状态位    Pde *env_pgdir;// 进程页目录的虚拟地址    TAILQ_ENTRY(Env) env_sched_link;// 构造调度队列 env_sched_list ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/p/2565.html" title="BUAA-OS-2023-Lab3-Report"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171232178.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-2023-Lab3-Report"></a></div><div class="recent-post-info"><a class="article-title" href="/p/2565.html" title="BUAA-OS-2023-Lab3-Report">BUAA-OS-2023-Lab3-Report</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-14T07:35:10.000Z" title="发表于 2023-04-14 15:35:10">2023-04-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a></span></div><div class="content">BUAA-OS-2023-Lab3-ReportThinking 3.1
  Thinking 3.1 请结合MOS 中的页目录自映射应用解释代码中 e-&gt;env_pgdir[PDX(UVPT)] = PADDR(e-&gt;env_pgdir) PTE_V 的含义

根据自映射机制可知， e-&gt;env_pgdir[PDX(UVPT)] 指的是进程块 e 的指向用户页表的页目录项，又根据页表映射的要求，这一项的内容应该是用户页表的物理地址，即PADDR(e-&gt;env_pgdir) ，再为其置有效位为1，初始化用户页表
Thinking 3.2
  elf_load_seg() 以函数指针的形式，接受外部自定义的回调函数 map_page 。请你找到与之相关的 data 这一参数在此处的来源，并思考它的作用。没有这个参数可不可以？为什么？

  elf_load_seg() 函数定义位于 lib/elfloader.c 中；使用仅有一处，位于 kern/env.c 的 load_icode() 函数中


首先这里的回调函数是定义在 kern/env.c 的 load_ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/p/32036.html" title="BUAA-OO-UNIT2-Summary"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171228427.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OO-UNIT2-Summary"></a></div><div class="recent-post-info"><a class="article-title" href="/p/32036.html" title="BUAA-OO-UNIT2-Summary">BUAA-OO-UNIT2-Summary</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-04-14T02:50:01.000Z" title="发表于 2023-04-14 10:50:01">2023-04-14</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Object-Oriented/">Object Oriented</a></span></div><div class="content">
纸上得来终觉浅，多线程要多测试


博客撰写基本要求：
总结分析三次作业中同步块的设置和锁的选择，并分析锁与同步块中处理语句之间的关系
总结分析三次作业中的调度器设计，并分析调度器如何与程序中的线程进行交互；总结分析三次作业中的调度策略，并分析自己的调度策略是如何适应时间、电量等多个性能指标的
结合线程协同的架构模式（如流水线架构），分析和总结自己
  三次作业架构设计的逐步变化和未来扩展能力画UML类图
  画UML协作图(sequence diagram)来展示线程之间的协作关系（别忘记主线程）
  识别出三次作业稳定的内容和易变的内容，并加以分析




分析自己程序出现过的bug以及自己面对多线程程序的debug方法
心得体会。从线程安全和层次化设计两个方面来梳理自己在本单元三次作业中获得的心得体会



注意：在编写完博客并发布在CSDN之后，请在选择要作为作业提交的博客，点击提交。
架构思路总结本单元作业，我采取了一种专精调度器的路线，调度器知晓程序内几乎所有类、线程的数据，并根据这些数据进行全局的调度，其包括：

  为指定请求分派特定的电梯
  唤醒、终止特定的电梯线 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/p/29513.html" title="BUAA-OS-Probe-Lab2"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171219228.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-Probe-Lab2"></a></div><div class="recent-post-info"><a class="article-title" href="/p/29513.html" title="BUAA-OS-Probe-Lab2">BUAA-OS-Probe-Lab2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-31T10:02:05.000Z" title="发表于 2023-03-31 18:02:05">2023-03-31</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/MOS-Probe/">MOS Probe</a></span></div><div class="content">实验细节在进行实验前，建议通读mmu.h和pmap.h文件，了解一些宏定义，对后续工作很有帮助
名称
参数
作用
PADDR
内核虚拟地址kva
将内核虚拟地址kva转成对应的物理地址
KADDR
物理地址pa
将物理地址pa转化为内核虚拟地址
page2pa
页信息结构struct Page
通过空闲页结构得到这一页起始位置的物理地址
pa2page
物理地址pa
通过物理地址pa获取这一页对应的页结构体struct Page
page2kva
页信息结构struct PageInfo
通过空闲页结构得到这一页起始位置的虚拟地址
PDX
线性地址la
获得该线性地址la对应的页目录项索引
PTX
线性地址la
获得该线性地址la在二级页表中对应的页表项索引
PTE_ADDR(pte)
页表项或页目录项的值
获得对应的页表/地址基址(低12位为0，并均为物理地址)
内核启动后的内存分配 - 2.1
我们的操作系统内核启动后需要执行下列三个函数完成内存分配机制的建立
  mips_detect_memory()：探测硬件可用内存，初始化内存基本变量
  mips_vm_init()：建立 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/p/50884.html" title="BUAA-OS-2023-Lab2-Report"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171231619.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-2023-Lab2-Report"></a></div><div class="recent-post-info"><a class="article-title" href="/p/50884.html" title="BUAA-OS-2023-Lab2-Report">BUAA-OS-2023-Lab2-Report</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-26T05:27:09.000Z" title="发表于 2023-03-26 13:27:09">2023-03-26</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a></span></div><div class="content">BUAA-OS-2023-Lab2-ReportThinking 2.1
虚拟地址在系统中的使用

根据指导书说明：

而在实际程序中，访存、跳转等指令以及用于取指的PC寄存器中的访存地址都是虚拟地址。 我们编写的C程序中也经常通过对指针解引用来进行访存，其中指针的值也会被视为虚拟地址，经过编译后生成相应的访存指令。

故在编写的C程序中指针存储的地址和汇编程序中lw和sw使用的值都是虚拟地址。
Thinking 2.2
链表宏与对应的链表结构


  从可重用性的角度，阐述用宏来实现链表的好处。

使用宏进行链表实现，一方面能够规范系统内所有链表的存在形式，达成结构上的统一，易于编码与链表维护； 链表宏中大部分传入的参数并不是链表项整体，而是不包含链表具体存放信息的一个结构体，这个结构体只负责管理链表指针。 我们利用宏对这个结构体进行处理，一方面统一链表操作，不限制可以使用链表的结构类型；另一方面能够降低链表指针与链表内容间不必要的耦合性，维护数据安全；使用预设结构还能保证链表结构的正确性。 查阅资料后得知，除了重用性角度外，使用宏定义还意味着放置在queue.h内的所有宏都是完整的 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/p/44391.html" title="BUAA-OS-2023-Lab1-Exam"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171229827.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-2023-Lab1-Exam"></a></div><div class="recent-post-info"><a class="article-title" href="/p/44391.html" title="BUAA-OS-2023-Lab1-Exam">BUAA-OS-2023-Lab1-Exam</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-20T07:31:33.000Z" title="发表于 2023-03-20 15:31:33">2023-03-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a></span></div><div class="content">lab1-Exam
课下一时爽，课上debug火葬场

课下出锅力！问题出在%ld/%d时负数的判定上（也就是判定neg_flag上）:我的判定方法是，if (num &lt; 0)则neg_flag = 1; num = -num;，这样对ld来说还说得过去，但是对于int类型就出问题了，long类型的num变量装了一个int的值，然后取相反数的时候却按着long类型跑的，然后补码尊贵的符号位就登场搞事情了（寄），还好课上一个多小时修出来了，要不然计组P7历史重演力！
lab1-Exam
题目要求：修改我们课下编写的vprintfmt函数，使其能够支持新格式符（format specifiers） range ：R，同时要求格式符R也能使用与其他格式符同等的副格式符：即&lt;flag&gt;、&lt;width&gt;、&lt;length&gt;三个副格式符。 格式符Range的作用为：使用函数中接下来的两个整数参数a, b，输出(&lt;a&gt;,&lt;b&gt;)字符串。这两个参数共用一组副格式符，受到的修饰相同。


  样例：对于下面的函数range_1_check， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/p/36144.html" title="BUAA-OO-UNIT1-Summary"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171217643.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OO-UNIT1-Summary"></a></div><div class="recent-post-info"><a class="article-title" href="/p/36144.html" title="BUAA-OO-UNIT1-Summary">BUAA-OO-UNIT1-Summary</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-17T03:30:21.000Z" title="发表于 2023-03-17 11:30:21">2023-03-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Object-Oriented/">Object Oriented</a></span></div><div class="content">
UNIT1-递归下降 因为想把作业比较完整地记录下来，而不仅仅是提交一份作业、交差完事，所以会写的相对多一点（ 可能刚敲完报告的同学 or 已经看了 n 份报告的助教看这篇答辩会觉得很臃肿，但这就不关我事了（？） 博客作业要求部分 包含在 作业完成情况 标题下

作业内容及完成情况作业要求
指导书总结搬运，回顾用

三次作业任务描述
  第一次作业任务：读入一个包含加、减、乘、乘方以及括号（其中括号的深度至多为 1 层）的多变量表达式，输出恒等变形展开所有括号后的表达式。 在本次作业中，展开所有括号的定义是：对原输入表达式E做恒等变形，得到新表达式E，且E中不含有字符 ( 和 ) 。
  第二次作业任务：读入一系列自定义函数的定义以及一个包含幂函数、三角函数、自定义函数调用的表达式，输出恒等变形展开所有括号后的表达式。 本次作业起，不再限制表达式内的括号层数
  第三次作业任务：读入一系列自定义函数的定义以及一个包含幂函数、三角函数、自定义函数调用、求导算子的表达式，输出恒等变形展开所有括号后的表达式。

设定的形式化表述
本节按不同作业中课程组的条目标定进行整合； 其中，条目前标定 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/p/54148.html" title="BUAA-OS-2023-Lab1-Report"><img class="post-bg" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305171230060.png?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OS-2023-Lab1-Report"></a></div><div class="recent-post-info"><a class="article-title" href="/p/54148.html" title="BUAA-OS-2023-Lab1-Report">BUAA-OS-2023-Lab1-Report</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-17T00:53:42.000Z" title="发表于 2023-03-17 08:53:42">2023-03-17</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Operating-System/">Operating System</a></span></div><div class="content">BUAA-OS-2023-Lab1-ReportThinking 1.1不使用交叉编译，使用gcc -c对文件进行编译，对编译而尚未链接的文件进行反汇编可以得到以下代码：
git@21371068:~/21371068/tools/readelf (lab1)$ gcc -c hello.c git@21371068:~/21371068/tools/readelf (lab1)$ objdump -DS hello.ohello.o：     文件格式 elf64-x86-64Disassembly of section .text:0000000000000000 &lt;main&gt;:   0:   f3 0f 1e fa             endbr64    4:   55                      push   %rbp   5:   48 89 e5                mov    %rsp,%rbp   8:   48 8d 05 00 00 00 00    lea    0x0(%rip),%rax        # f &lt ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/p/6747.html" title="Response Paper for Positive Psychology Lecture 3">Response Paper for Positive Psychology Lecture 3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-03-11T08:12:18.000Z" title="发表于 2023-03-11 16:12:18">2023-03-11</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Elevate/">Elevate()</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Reading/">Reading</a></span></div><div class="content">“Marva Collins comes along and reframes the question. And her question becomes ‘how can we cultivate the seed of greatness in our students.” (0:04:52)
If a student has depression or other mental illness, we can’t just tell him that depression is wrong, you can’t do that. This method of correcting errors from the negative side cannot always be used. Instead, like the teacher, tell him what is right and what is beautiful and shining in life. In this way, students can understand the beauty of thems ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/5/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/#content-inner">7</a><a class="extend next" rel="next" href="/page/7/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305132152908.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CookedBear</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">69</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/CookedBear"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CookedBear" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">ReStart</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/p/4e970c0.html" title="BUAA-SoftwareEngineering-Task4"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403130016509.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-SoftwareEngineering-Task4"/></a><div class="content"><a class="title" href="/p/4e970c0.html" title="BUAA-SoftwareEngineering-Task4">BUAA-SoftwareEngineering-Task4</a><time datetime="2024-03-22T18:21:57.000Z" title="发表于 2024-03-23 02:21:57">2024-03-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/204601f4.html" title="BUAA-FPGA多核并行计算-Exp2-2"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403142326098.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-FPGA多核并行计算-Exp2-2"/></a><div class="content"><a class="title" href="/p/204601f4.html" title="BUAA-FPGA多核并行计算-Exp2-2">BUAA-FPGA多核并行计算-Exp2-2</a><time datetime="2024-03-20T15:24:39.000Z" title="发表于 2024-03-20 23:24:39">2024-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/74b98825.html" title="BUAA-X86汇编程序设计-Exp1"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202402292225468.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-X86汇编程序设计-Exp1"/></a><div class="content"><a class="title" href="/p/74b98825.html" title="BUAA-X86汇编程序设计-Exp1">BUAA-X86汇编程序设计-Exp1</a><time datetime="2024-03-20T06:11:24.000Z" title="发表于 2024-03-20 14:11:24">2024-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/9a8de563.html" title="BUAA-SoftwareEngineering-Task3"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403130016509.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-SoftwareEngineering-Task3"/></a><div class="content"><a class="title" href="/p/9a8de563.html" title="BUAA-SoftwareEngineering-Task3">BUAA-SoftwareEngineering-Task3</a><time datetime="2024-03-16T06:41:29.000Z" title="发表于 2024-03-16 14:41:29">2024-03-16</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Compile-Principle/"><span class="card-category-list-name">Compile Principle</span><span class="card-category-list-count">7</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/D-Dimension/"><span class="card-category-list-name">D_Dimension()</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DataBase/"><span class="card-category-list-name">DataBase</span><span class="card-category-list-count">4</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/OS/" style="font-size: 1.3em; color: #99a1ac">OS</a> <a href="/tags/Elevate/" style="font-size: 1.5em; color: #99a9bf">Elevate</a> <a href="/tags/BUAA/" style="font-size: 1.4em; color: #99a5b6">BUAA</a> <a href="/tags/Fundamental/" style="font-size: 1.1em; color: #999">Fundamental</a> <a href="/tags/Compile-Principle/" style="font-size: 1.2em; color: #999da3">Compile Principle</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">69</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2023-03-08T17:03:19.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">200.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-03-22T18:26:41.355Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By CookedBear</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (false) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (false) {
    typedJSFn.init(["『你向往的未来，由我来勾勒线条』"])
  } else {
    document.getElementById("subtitle").innerHTML = '『你向往的未来，由我来勾勒线条』'
  }
}
typedJSFn.run(subtitleType)</script></div><script defer src="https://gcore.jsdelivr.net/combine/npm/jquery@latest/dist/jquery.min.js,gh/weilining/jsdelivr/jquery/circlemagic/circlemagic.min.js,gh/weilining/jsdelivr@latest/jquery/circlemagic/butterflycirclemagic.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>