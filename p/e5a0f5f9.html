<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>BUAA-计算机网络实验-Exp3 | sin</title><meta name="robots" content="noindex"><meta name="author" content="CookedBear"><meta name="copyright" content="CookedBear"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本系列是北航计算机学院于 2024 年春季学期开设的核心专业课《计算机网络实验》课程的实验报告记录，实验形式为两人组队实验。由于学习过程中掌握并不牢靠，如有错误请读者不吝赐教！  数据链路层 &amp; 网络层实验 - 2 前半部分为实验的实际操作环节，后半为实验报告内容的填写。  实验内容 VLAN TRUNK 实验 VLAN TAG 实验 VLAN 间通信综合实验 子网划分设计型实验（含预习">
<meta property="og:type" content="article">
<meta property="og:title" content="BUAA-计算机网络实验-Exp3">
<meta property="og:url" content="https://cookedbear.github.io/p/e5a0f5f9.html">
<meta property="og:site_name" content="sin">
<meta property="og:description" content="本系列是北航计算机学院于 2024 年春季学期开设的核心专业课《计算机网络实验》课程的实验报告记录，实验形式为两人组队实验。由于学习过程中掌握并不牢靠，如有错误请读者不吝赐教！  数据链路层 &amp; 网络层实验 - 2 前半部分为实验的实际操作环节，后半为实验报告内容的填写。  实验内容 VLAN TRUNK 实验 VLAN TAG 实验 VLAN 间通信综合实验 子网划分设计型实验（含预习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403251300866.jpg?imageMogr2/format/webp">
<meta property="article:published_time" content="2024-03-31T04:00:56.947Z">
<meta property="article:modified_time" content="2024-04-09T09:27:18.145Z">
<meta property="article:author" content="CookedBear">
<meta property="article:tag" content="BUAA">
<meta property="article:tag" content="Elevate">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403251300866.jpg?imageMogr2/format/webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://cookedbear.github.io/p/e5a0f5f9.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":150},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'BUAA-计算机网络实验-Exp3',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-09 17:27:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/center-atom.css" ><meta name="generator" content="Hexo 5.4.2"></head><body>
    <div id='loader'>
        
        <div class="loading-left-bg"></div>
        <div class="loading-right-bg"></div>
        <div class="spinner-box">
            <div class="configure-border-1">
                <div class="configure-core"></div>
            </div>
            <div class="configure-border-2">
                <div class="configure-core"></div>
            </div>
            <div class="loading-word">加载中...</div>
        </div>
        
    </div>
        
    <script>
        var endLoading = function () {
        document.body.style.overflow = 'auto';
        document.getElementById('loader').classList.add("loading");
        }
        window.addEventListener('load',endLoading);
    </script>
    <div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305132152908.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">75</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 小工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:80/"><span> bdpan</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:81/"><span> 25時生成器</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:9667/"><span> 程序员备忘录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403251300866.jpg?imageMogr2/format/webp')"><nav id="nav"><span id="blog-info"><a href="/" title="sin"><span class="site-name">sin</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 小工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:80/"><span> bdpan</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:81/"><span> 25時生成器</span></a></li><li><a class="site-page" target="_blank" rel="noopener" href="http://103.151.216.224:9667/"><span> 程序员备忘录</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">BUAA-计算机网络实验-Exp3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-31T04:00:56.947Z" title="发表于 2024-03-31 12:00:56">2024-03-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-04-09T09:27:18.145Z" title="更新于 2024-04-09 17:27:18">2024-04-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Elevate/">Elevate()</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="BUAA-计算机网络实验-Exp3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>本系列是北航计算机学院于 2024 年春季学期开设的核心专业课《计算机网络实验》课程的实验报告记录，实验形式为两人组队实验。由于学习过程中掌握并不牢靠，如有错误请读者不吝赐教！</p>
</blockquote>
<h1 id="数据链路层-amp-网络层实验-2"><a href="#数据链路层-amp-网络层实验-2" class="headerlink" title="数据链路层 &amp; 网络层实验 - 2"></a>数据链路层 &amp; 网络层实验 - 2</h1><blockquote>
<p>前半部分为实验的<strong>实际操作</strong>环节，后半为<strong>实验报告</strong>内容的填写。</p>
</blockquote>
<h1 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h1><ul>
<li>VLAN TRUNK 实验</li>
<li>VLAN TAG 实验</li>
<li>VLAN 间通信综合实验</li>
<li>子网划分设计型实验（<strong>含预习部分</strong>）</li>
<li>网络风暴与端口聚合实验</li>
<li>端口镜像实验</li>
</ul>
<h1 id="VLAN-TRUNK-实验"><a href="#VLAN-TRUNK-实验" class="headerlink" title="VLAN TRUNK 实验"></a>VLAN TRUNK 实验</h1><h2 id="实验说明"><a href="#实验说明" class="headerlink" title="实验说明"></a>实验说明</h2><h2 id="实验内容-1"><a href="#实验内容-1" class="headerlink" title="实验内容"></a>实验内容</h2><ul>
<li><strong>不完全</strong>按照图示进行组网，注意要将 PCB 通过集线器（HUB）接在 S1 和 S2 之间，也即 S1、S2、PCB 共同接入集线器，这样 PCB 即可截获在 S1 和 S2 之间发送的报文信息</li>
</ul>
<p><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091417724.png?imageMogr2/format/webp" alt="image-20240409141709616"></p>
<ul>
<li>配置 VLAN 号与端口范围</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">VLAN 2</span><br><span class="line">port G 1/0/1 to G 1/0/5</span><br><span class="line">VLAN 3</span><br><span class="line">port G 1/0/20 to G 1/0/24</span><br></pre></td></tr></table></figure>

<blockquote>
<p>经过这样的简单配置后，连接在不同交换机上、处于相同 VLAN 的主机间仍然不能通信，因为 S1 与 S2 间的链路无法转发这些数据报</p>
</blockquote>
<ul>
<li>配置两台交换机 TRUNK 端口，允许 VLAN 2 和 VLAN 3 的数据报进行转发</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">interface G 1/0/13</span><br><span class="line">port link-type trunk</span><br><span class="line">port trunk permit VLAN 2 3</span><br></pre></td></tr></table></figure>

<ul>
<li><p>截获 PCA、PCB、PCC 的报文，并执行 PCA ping PCC，根据第一条 ICMP echo Request 报文的二层转发过程填入实验报告第 6 题表中</p>
</li>
<li><p>查看交换机 S1 的 MAC 地址表，填写实验报告第 7 题</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">display mac-address</span><br></pre></td></tr></table></figure>

<h1 id="VLAN-TAG-实验"><a href="#VLAN-TAG-实验" class="headerlink" title="VLAN TAG 实验"></a>VLAN TAG 实验</h1><h2 id="实验说明-1"><a href="#实验说明-1" class="headerlink" title="实验说明"></a>实验说明</h2><h2 id="实验内容-2"><a href="#实验内容-2" class="headerlink" title="实验内容"></a>实验内容</h2><ul>
<li>维持 VLAN TRUNK 实验的组网结构基本不变，据实验报告要求应该把 PCA 接入集线器，将 PCB 接在 S1 上，如图所示</li>
</ul>
<p><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091425818.png?imageMogr2/format/webp" alt="image-20240409142558763"></p>
<ul>
<li>将两个交换机原本的 TRUNK 接口转为 HYBRID 类型，并进行进一步配置（VLAN2 tagged、VLAN3 untagged、PVID = 1）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">undo port link-type</span><br><span class="line">port link-type hybrid</span><br><span class="line">port hybrid pvid vlan 1</span><br><span class="line">port hybrid vlan 2 tagged</span><br><span class="line">port hybrid vlan 3 untagged</span><br></pre></td></tr></table></figure>

<ul>
<li>执行 PCB ping PCD，观察能否 ping 通，并填写实验报告第 8 题</li>
<li>修改交换机 G 1/0/13 的配置，再次配置使得 PCB 和 PCD 能 ping 通，截获报文将第一条 ICMP echo Request 报文的二层转发过程填写在实验报告第 8 题表中</li>
<li>分析报文截获，完成实验报告第 9 题</li>
</ul>
<h1 id="VLAN-间通信综合实验"><a href="#VLAN-间通信综合实验" class="headerlink" title="VLAN 间通信综合实验"></a>VLAN 间通信综合实验</h1><h2 id="实验说明-2"><a href="#实验说明-2" class="headerlink" title="实验说明"></a>实验说明</h2><h2 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h2><ul>
<li>恢复实验组网与 VLAN TRUNK 实验一致，注意调整四台 PC 的 IP 与网关</li>
</ul>
<p><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091437004.png?imageMogr2/format/webp" alt="image-20240409143749952"></p>
<ul>
<li>配置交换机 S1 的 VLAN 接口 IP 地址，均配置为子网的网关地址</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">interface VLAN 2</span><br><span class="line">ip address 192.168.2.1 255.255.255.0</span><br><span class="line">interface VLAN 3</span><br><span class="line">ip address 192.168.3.1 255.255.255.0</span><br></pre></td></tr></table></figure>

<ul>
<li>清空交换机 MAC 地址表、arp 缓存以及各 PC 的 ARP 缓存</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/* <span class="keyword">in</span> S1/S2 view */</span><br><span class="line">system-view</span><br><span class="line">undo mac-address</span><br><span class="line">&lt;Ctrl + Z&gt;</span><br><span class="line">reset arp all</span><br><span class="line">/* <span class="keyword">in</span> PC cmd */</span><br><span class="line">arp -d</span><br></pre></td></tr></table></figure>

<ul>
<li>执行 PCC ping PCD，对所有报文的转发过程进行分析，完成实验报告第 8 题</li>
</ul>
<h1 id="子网划分设计型实验"><a href="#子网划分设计型实验" class="headerlink" title="子网划分设计型实验"></a>子网划分设计型实验</h1><h2 id="实验说明-3"><a href="#实验说明-3" class="headerlink" title="实验说明"></a>实验说明</h2><h2 id="实验过程-1"><a href="#实验过程-1" class="headerlink" title="实验过程"></a>实验过程</h2><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091639784.png?imageMogr2/format/webp" alt="image-20240409163951737" style="width:75%;" />

<p>如图，某公司要建设公司网络，从网络服务商处租用了一个 C 类地址 202.108.100.*/24，接网络服务商路由器的地址如图所示，请给出设计方案，满足如下要求：</p>
<ol>
<li>网络划分子网数越多越好，但每个子网的主机数大于 15 台；</li>
<li>所有用户都能上网，即要求所有主机都能 ping 通网络服务商路由器的 E0 口。</li>
</ol>
<p>提示：如图所示，划分好子网后，在路由器和三层交换机上要配置静态路由。</p>
<blockquote>
<p>在实际操作中，我们以 R1 作为网络服务商路由器、 S1 作为三层交换机、S2 和集线器 HUB 分别作为两个二层交换机，每个二层交换机下配置两台 PC 作为演示</p>
</blockquote>
<p>设计方案与具体设置操作见实验报告内容</p>
<h1 id="网络风暴与端口聚合实验"><a href="#网络风暴与端口聚合实验" class="headerlink" title="网络风暴与端口聚合实验"></a>网络风暴与端口聚合实验</h1><h2 id="实验说明-4"><a href="#实验说明-4" class="headerlink" title="实验说明"></a>实验说明</h2><h2 id="实验内容-3"><a href="#实验内容-3" class="headerlink" title="实验内容"></a>实验内容</h2><ul>
<li>按照下图进行组网，若按顺序完成实验，可以先<strong>清除上面实验的 VLAN 和接口配置</strong></li>
</ul>
<img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091452950.png?imageMogr2/format/webp" alt="image-20240409145212897" style="zoom:150%;" />

<blockquote>
<p>其余操作可见上次线上的<a href="">实验报告</a></p>
</blockquote>
<h1 id="端口镜像实验"><a href="#端口镜像实验" class="headerlink" title="端口镜像实验"></a>端口镜像实验</h1><h2 id="实验说明-5"><a href="#实验说明-5" class="headerlink" title="实验说明"></a>实验说明</h2><h2 id="实验内容-4"><a href="#实验内容-4" class="headerlink" title="实验内容"></a>实验内容</h2><ul>
<li>按照下图进行组网，Device 可使用交换机 S1 进行配置</li>
</ul>
<img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091457523.png?imageMogr2/format/webp" alt="image-20240409145749474" style="zoom:150%;" />

<ul>
<li>配置本地镜像组、设置镜像端口、关闭生成树协议</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建本地镜像组 1。</span></span><br><span class="line">&lt;Device&gt; system-view</span><br><span class="line">[Device] mirroring-group 1 <span class="built_in">local</span></span><br><span class="line"><span class="comment"># 配置本地镜像组 1 的源端口为 GigabitEthernet1/0/1 和 GigabitEthernet1/0/2，对源端口收发的报文都进行镜像，目的端口为 GigabitEthernet1/0/3。</span></span><br><span class="line">[Device] mirroring-group 1 mirroring-port gigabitethernet 1/0/1 gigabitethernet 1/0/2 both</span><br><span class="line">[Device] mirroring-group 1 monitor-port gigabitethernet 1/0/3</span><br><span class="line"><span class="comment"># 在目的端口 GigabitEthernet1/0/3 上关闭生成树协议。</span></span><br><span class="line">[Device] interface gigabitethernet 1/0/3</span><br><span class="line">[Device-GigabitEthernet1/0/3] undo stp <span class="built_in">enable</span> </span><br><span class="line">[Device-GigabitEthernet1/0/3] quit</span><br></pre></td></tr></table></figure>

<ul>
<li>执行 PCA ping PCB，检测 PCC 所截获的报文信息，实际上应为所有 PCA 和 PCB 的报文信息</li>
</ul>
<h1 id="数据链路层实验报告"><a href="#数据链路层实验报告" class="headerlink" title="数据链路层实验报告"></a>数据链路层实验报告</h1><h2 id="广播风暴-amp-端口聚合"><a href="#广播风暴-amp-端口聚合" class="headerlink" title="广播风暴 &amp; 端口聚合"></a>广播风暴 &amp; 端口聚合</h2><blockquote>
<p>观察了广播风暴后，在两台交换机上都配置启用生成树协议。请问是否还能观察到广播风暴？为什么？</p>
</blockquote>
<p>不能再观测到广播风暴。</p>
<p>因为生成树协议阻断了网络中的环路，限制数据在部分活跃端口上传输。</p>
<h2 id="广播风暴-amp-端口聚合-1"><a href="#广播风暴-amp-端口聚合-1" class="headerlink" title="广播风暴 &amp; 端口聚合"></a>广播风暴 &amp; 端口聚合</h2><blockquote>
<p>配置了端口聚合后，请问是否还能观察到广播风暴？为什么？</p>
</blockquote>
<p>不能再观测到广播风暴。</p>
<p>配置端口聚合后，两交换机之间现仅存在一条多个端口合并后的聚合链路，不会再产生广播风暴。</p>
<h2 id="广播风暴-amp-端口聚合-2"><a href="#广播风暴-amp-端口聚合-2" class="headerlink" title="广播风暴 &amp; 端口聚合"></a>广播风暴 &amp; 端口聚合</h2><blockquote>
<p>模拟链路故障，将连接两台交换机的一根网线拔掉或者将被聚合的某个端口 shutdown，检查网络两端是否仍能联通，并解释为什么？体会其链路备份的作用。</p>
</blockquote>
<p>仍能联通。</p>
<p>生成树协议会暂时禁用多余链路。当现有链路产生变化影响网络联通性时，生成树协议会重启这些链路。</p>
<h2 id="VLAN-TRUNK"><a href="#VLAN-TRUNK" class="headerlink" title="VLAN TRUNK"></a>VLAN TRUNK</h2><blockquote>
<p>根据跨交换机VLAN的实验中的报文截获结果填写下表</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">转发过程</th>
<th align="center">源 MAC 地址</th>
<th align="center">目的 MAC 地址</th>
<th align="center">源 IP 地址</th>
<th align="center">目的 IP 地址</th>
<th align="center">VLAN ID</th>
</tr>
</thead>
<tbody><tr>
<td align="center">PCA -&gt; S1</td>
<td align="center">MAC_PCA</td>
<td align="center">MAC_PCC</td>
<td align="center">192.168.2.10</td>
<td align="center">192.168.2.11</td>
<td align="center">不含 TAG 字段</td>
</tr>
<tr>
<td align="center">S1 -&gt; S2</td>
<td align="center">MAC_PCA</td>
<td align="center">MAC_PCC</td>
<td align="center">192.168.2.10</td>
<td align="center">192.168.2.11</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">S2 -&gt; PCC</td>
<td align="center">MAC_PCA</td>
<td align="center">MAC_PCC</td>
<td align="center">192.168.2.10</td>
<td align="center">192.168.2.11</td>
<td align="center">不含 TAG 字段</td>
</tr>
</tbody></table>
<h2 id="VLAN-TRUNK-1"><a href="#VLAN-TRUNK-1" class="headerlink" title="VLAN TRUNK"></a>VLAN TRUNK</h2><blockquote>
<p>请查看交换机 S1 的 MAC 地址表，填写下表，并进一步体会交换机 MAC 地址表的学习和转发</p>
</blockquote>
<table>
<thead>
<tr>
<th>MAC 地址</th>
<th>对应的主机</th>
<th>VLAN ID</th>
<th>State</th>
<th>端口号</th>
<th>AGING TIME</th>
</tr>
</thead>
<tbody><tr>
<td>MAC_PCA</td>
<td>PCA</td>
<td>2</td>
<td>Learned</td>
<td>G 1/0/1</td>
<td>Y</td>
</tr>
<tr>
<td>MAC_PCB</td>
<td>PCB</td>
<td>1</td>
<td>Learned</td>
<td>G 1/0/13</td>
<td>Y</td>
</tr>
<tr>
<td>MAC_PCC</td>
<td>PCC</td>
<td>2</td>
<td>Learned</td>
<td>G 1/0/13</td>
<td>Y</td>
</tr>
<tr>
<td>MAC_PCD</td>
<td>PCD</td>
<td>3</td>
<td>Learned</td>
<td>G 1/0/13</td>
<td>Y</td>
</tr>
<tr>
<td>对应 MAC</td>
<td>S2 的 G 1/0/13 接口</td>
<td>1</td>
<td>Learned</td>
<td>G 1/0/13</td>
<td>Y</td>
</tr>
</tbody></table>
<h2 id="VLAN-TAG"><a href="#VLAN-TAG" class="headerlink" title="VLAN TAG"></a>VLAN TAG</h2><blockquote>
<p>继续前面的实验，如图 2-12，对两台交换机的 E0/13 端口进行设置；执行 PCB ping PCD，观察能否 ping 通，为什么？</p>
</blockquote>
<p>PCB ping PCD 并不能 ping 通。</p>
<p>因为 hybrid 类型接口会将 PCB 发送的数据先打上 VLAN3 标签，检测为 untagged 后再去掉其标签。</p>
<p>S2 接受到来自 G1/0/13 的无 tag 数据,自动封装了其默认的 pvid 的 tag，即 pvid = 1；S2 内部无其他可发送的 VLAN 1 主机，无法抵达处于 VLAN 3 的 PCD。</p>
<blockquote>
<p>修改两个交换机的 E 1/0/13 端口的配置，使 PCB 能够 ping 通 PCD，结合各计算机截获报文综合分析，结果填入下表。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">转发过程</th>
<th align="center">源 MAC 地址</th>
<th align="center">目的 MAC 地址</th>
<th align="center">源 IP 地址</th>
<th align="center">目的 IP 地址</th>
<th align="center">VLAN ID</th>
</tr>
</thead>
<tbody><tr>
<td align="center">PCB -&gt; S1</td>
<td align="center">MAC_PCB</td>
<td align="center">MAC_PCD</td>
<td align="center">192.168.2.12</td>
<td align="center">192.168.2.13</td>
<td align="center">不含 TAG 字段</td>
</tr>
<tr>
<td align="center">S1 -&gt; S2</td>
<td align="center">MAC_PCB</td>
<td align="center">MAC_PCD</td>
<td align="center">192.168.2.12</td>
<td align="center">192.168.2.13</td>
<td align="center">不含 TAG 字段</td>
</tr>
<tr>
<td align="center">S2 -&gt; PCD</td>
<td align="center">MAC_PCB</td>
<td align="center">MAC_PCD</td>
<td align="center">192.168.2.12</td>
<td align="center">192.168.2.13</td>
<td align="center">不含 TAG 字段</td>
</tr>
</tbody></table>
<h2 id="VLAN-TAG-1"><a href="#VLAN-TAG-1" class="headerlink" title="VLAN TAG"></a>VLAN TAG</h2><blockquote>
<p>与步骤八比较，截获的报文有何不同？请结合 VLAN 端口分类和 PVID 的作用，解释这种情况下，报文转发的过程。</p>
</blockquote>
<p>与步骤八比较，截获报文的主要区别在于从 S1 向 S2 发送的报文上，后者报文不包含 PVID 和 TAG 字段。</p>
<p>这种情况下，S1 接收到自 PCB 的报文，按照 VLAN 分配追加 VLAN ID = 3 的 TAG，在经由 G 1/0/13 转发时，因为 VLAN 3 为 UNTAGGED，故去掉其 TAG 后再进行发送；S2 经 G 1/0/13 转发时，因报文不带 TAG，故应该按照端口 PVID 添加 VLAN ID = 3 的 TAG，S2 发现同属 VLAN 3 的 G 1/0/24（PCD），向其发送去掉的 TAG 后的报文。</p>
<p>故所捕获的报文均不带 VLAN ID 与 TAG 字段。</p>
<h1 id="网络层实验报告"><a href="#网络层实验报告" class="headerlink" title="网络层实验报告"></a>网络层实验报告</h1><h2 id="VLAN-间通信综合实验-1"><a href="#VLAN-间通信综合实验-1" class="headerlink" title="VLAN 间通信综合实验"></a>VLAN 间通信综合实验</h2><blockquote>
<p>根据跨交换机VLAN间路由实验（PCC ping PCD）所截获报文，对整个网络层和数据链路层的报文转发过程进行分析。</p>
<p><strong>约定如下：数据帧中的 MAC 地址对：（目的 MAC 地址，源MAC地址）</strong></p>
<p><strong>数据报中的 IP 地址对：（目的 IP 地址，源 IP 地址）</strong></p>
<p><strong>MAC_VLAN2</strong> 指的是 S1 交换机中 interface VLAN 2 所用的接口 MAC 地址，<strong>MAC_VLAN3</strong> 同理，display interface VLAN 2</p>
<p>加粗内容为实验报告填空内容</p>
</blockquote>
<h3 id="STEP-1"><a href="#STEP-1" class="headerlink" title="STEP 1"></a>STEP 1</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091531215.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>PCC 发送的第一个报文类型是什么？为什么？</p>
</blockquote>
<p>ARP Request 报文。因为 PCC 发送的目标 IP 不位于自身所在的网段内，故现象默认网关发送报文，尝试进行间接交付。</p>
<blockquote>
<p>包含该报文数据帧中的 VLAN id、MAC 和 IP 地址对是：</p>
</blockquote>
<p>VLAN id＝  <strong>不含 TAG 字段</strong></p>
<p>MAC：(ff.ff.ff.ff.ff.ff ,MAC_PCC)</p>
<p>IP：(192.168.2.1,192.168.2.11)</p>
<h3 id="STEP-2"><a href="#STEP-2" class="headerlink" title="STEP 2"></a>STEP 2</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091533204.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2 收到数据帧后，对其 MAC 地址表的操作是：</p>
</blockquote>
<p>添加 PCC 所属 MAC 和 IP 的地址表表项。</p>
<blockquote>
<p>S2 根据接收数据帧的端口所属 VLAN，在其中插 VLAN id ＝ <strong>2</strong> 的标签，并向除接收端口外的所有 VLAN2 端口转发这个数据帧。</p>
</blockquote>
<h3 id="STEP-3"><a href="#STEP-3" class="headerlink" title="STEP 3"></a>STEP 3</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091533957.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S1 收到数据帧后，对其 MAC 地址表的操作是：</p>
</blockquote>
<p>添加 MAC_PCC 对应的地址表表项</p>
<blockquote>
<p>S1 将 ARP 报文交付给网络层，S1 对其 arp 表的操作是：</p>
</blockquote>
<p>添加 PCC 的 ARP 表项</p>
<blockquote>
<p>S1 发送的包含 ARP Reply 报文的数据帧中：</p>
</blockquote>
<p>MAC：(MAC_PCC， MAC_ VLAN 2)</p>
<p>IP：(192.168.2.11,192.168.2.1)</p>
<p>VLAN id = 2</p>
<h3 id="STEP-4"><a href="#STEP-4" class="headerlink" title="STEP 4"></a>STEP 4</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091559266.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2收到数据帧后，对其MAC地址表的操作是：</p>
</blockquote>
<p>添加交换机 S1_MAC_VLAN2 的 MAC 地址表项</p>
<blockquote>
<p>S2收到的数据帧后，根据VLAN标签和 <strong>MAC 地址</strong> 表，决定向端口 <strong>G 1/0/1</strong> 转发该数据帧；</p>
</blockquote>
<blockquote>
<p>S2根据端口 <strong>G 1/0/1</strong> 是 <strong>ACCESS</strong> 类型端口，去掉 VLAN 标签，从端口 <strong>G 1/0/1</strong> 转发该帧。</p>
</blockquote>
<h3 id="STEP-5"><a href="#STEP-5" class="headerlink" title="STEP 5"></a>STEP 5</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091601991.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>PCC收到ARP Reply报文，更新其ARP缓存，显示ARP缓存的命令：<code>arp -a</code></p>
<p>显示的内容：</p>
<table>
<thead>
<tr>
<th align="center">IP 地址</th>
<th align="center">MAC 地址</th>
</tr>
</thead>
<tbody><tr>
<td align="center">192.168.2.1</td>
<td align="center">54: 2b: de: 28: ac: 21</td>
</tr>
<tr>
<td align="center">192.168.2.255</td>
<td align="center">ff: ff: ff: ff: ff: ff</td>
</tr>
</tbody></table>
</blockquote>
<blockquote>
<p>PCC 发送的包含 ICMP Echo Request 报文的数据帧中：</p>
<p>VLAN id = <strong>无 TAG 字段</strong></p>
<p>MAC：(<strong>MAC_VLAN2，MAC_PCC</strong>)</p>
<p>IP：(<strong>192.168.3.11，192.168.2.11</strong>)</p>
</blockquote>
<h3 id="STEP-6"><a href="#STEP-6" class="headerlink" title="STEP 6"></a>STEP 6</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091605097.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2 收到数据帧，根据其接收端口，添加 VLAN2 标签；根据目的 MAC，查找 MAC 地址表；将数据帧由 <strong>G 1/0/13</strong> 端口转发给 S1。</p>
</blockquote>
<blockquote>
<p>S2转发的数据帧中：VLAN id = <strong>2</strong></p>
<p>MAC：(<strong>MAC_VLAN2，MAC_PCC</strong>)</p>
<p>IP：(<strong>192.168.2.11，192.168.3.11</strong>)</p>
</blockquote>
<h3 id="STEP-7"><a href="#STEP-7" class="headerlink" title="STEP 7"></a>STEP 7</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091607718.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S1 收到 S2 转发的数据帧，交付网络层，根据目的 IP 地址，查路由表，将报文路由到 int vlan 3，准备通过数据链路层交付给 PCD；</p>
</blockquote>
<blockquote>
<p>但没有查到PCD的MAC地址，就要发送包含ARP Request报文的数据帧； </p>
<p>VLAN id = <strong>3</strong></p>
<p>MAC：(<strong>Broadcast，MAC_VLAN3</strong>)</p>
<p>IP：(<strong>192.168.3.11，192.168.3.1</strong>)</p>
</blockquote>
<h3 id="STEP-8"><a href="#STEP-8" class="headerlink" title="STEP 8"></a>STEP 8</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091608412.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2 收到 S1 转发的数据帧，根据其 VLAN id =  <strong>3</strong>，向除接收端口外的所有属于 VLAN <strong>3</strong> 的端口转发该数据帧；</p>
</blockquote>
<blockquote>
<p>S2 根据端口 <strong>G 1/0/24</strong> 是 <strong>ACCESS</strong> 类型端口，去掉 VLAN 标签，从端口 <strong>G 1/0/24</strong> 转发该帧。</p>
</blockquote>
<h2 id="STEP-9"><a href="#STEP-9" class="headerlink" title="STEP 9"></a>STEP 9</h2><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091610868.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>PCD 收到 S2 转发的数据帧，更新其 ARP 缓存，其 ARP 缓存的内容是：</p>
<table>
<thead>
<tr>
<th align="center">IP 地址</th>
<th align="center">MAC 地址</th>
</tr>
</thead>
<tbody><tr>
<td align="center">192.168.3.1</td>
<td align="center">54: 2b: de: 28: ac: 22</td>
</tr>
<tr>
<td align="center">192.168.3.255</td>
<td align="center">ff: ff: ff: ff: ff: ff</td>
</tr>
</tbody></table>
</blockquote>
<blockquote>
<p>PCD 发送包含 ARP reply 报文的数据帧中；</p>
<p>VLAN id = <strong>无 TAG 字段</strong></p>
<p>MAC：(<strong>MAC_VLAN3，MAC_PCD</strong>)</p>
<p>IP：(<strong>192.168.3.1，192.168.3.11</strong>)</p>
</blockquote>
<h3 id="STEP-10"><a href="#STEP-10" class="headerlink" title="STEP 10"></a>STEP 10</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091611918.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2 收到数据帧，根据其接收端口，添加 VLAN <strong>3</strong> 的标签；根据目的 MAC，查找 MAC 地址表；将数据帧由 <strong>G 1/0/13</strong> 端口转发给 S1。</p>
</blockquote>
<blockquote>
<p>S2 转发的数据帧中：</p>
<p>VLAN id = 3</p>
<p>MAC：(MAC_VLAN3，MAC_PCD)</p>
<p>IP：(192.168.3.1，192.168.3.11)</p>
</blockquote>
<h3 id="STEP-11"><a href="#STEP-11" class="headerlink" title="STEP 11"></a>STEP 11</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091613709.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S1 收到数据帧，提交到网络层，更新其 ARP 表；</p>
</blockquote>
<blockquote>
<p>S1 对包含 ICMP Echo Request 报文的数据帧的 VLAN 标签进行替换，由 VLAN id = <strong>2</strong> 变为VLAN id = <strong>3</strong>。封装的数据帧中：</p>
<p>VLAN id = <strong>3</strong></p>
<p>MAC：(<strong>MAC_PCD，MAC_VLAN3</strong>)</p>
<p>IP：(<strong>192.168.3.11，192.168.2.11</strong>)</p>
</blockquote>
<blockquote>
<p>查找 MAC 地址表，由 <strong>G 1/0/13</strong> 端口发送</p>
</blockquote>
<h3 id="STEP-12"><a href="#STEP-12" class="headerlink" title="STEP 12"></a>STEP 12</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091615033.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2 收到 S1 转发的数据帧，根据其 VLAN id 和目的 MAC 地址，向 <strong>G 1/0/24</strong> 端口转发该数据帧；</p>
</blockquote>
<blockquote>
<p>同时，S2 根据端口 <strong>G 1/0/24</strong> 是 <strong>ACCESS</strong> 类型端口，去掉 VLAN 标签，从端口 <strong>G 1/0/24</strong> 转发该帧。</p>
</blockquote>
<h3 id="STEP-13"><a href="#STEP-13" class="headerlink" title="STEP 13"></a>STEP 13</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091616534.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>PCD 收到包含 ICMP Echo Request 报文的数据帧，发送包含 ICMP Echo Reply 报文的数据帧：</p>
<p>VLAN id = <strong>无 TAG 字段</strong></p>
<p>MAC：(<strong>MAC_VLAN3，MAC_PCD</strong>)</p>
<p>IP：(<strong>192.168.2.11，192.168.3.11</strong>)</p>
</blockquote>
<h3 id="STEP-14"><a href="#STEP-14" class="headerlink" title="STEP 14"></a>STEP 14</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091618334.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />



<blockquote>
<p>S2 收到数据帧，根据其接收端口，添加 VLAN <strong>3</strong> 的标签；根据目的 MAC，查找 MAC 地址表；将数据帧由 <strong>G 1/0/13</strong> 端口转发给 S1。</p>
</blockquote>
<blockquote>
<p>S2 转发的数据帧中：</p>
<p>VLAN id = <strong>3</strong></p>
<p>MAC：(<strong>MAC_VLAN3，MAC_PCD</strong>)</p>
<p>IP：(<strong>192.168.2.11，192.168.3.11</strong>)</p>
</blockquote>
<h3 id="STEP-15"><a href="#STEP-15" class="headerlink" title="STEP 15"></a>STEP 15</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091620816.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S1 收到 S2 转发的数据帧，交付网络层，根据目的IP地址，查路由表，将报文路由到 int vlan2，准备通过数据链路层交付给 PCC；</p>
</blockquote>
<blockquote>
<p>查找 PCC 的 MAC 地址，替换 VLAN 标签，封装并发送数据帧；</p>
<p>VLAN id = <strong>2</strong></p>
<p>MAC：(<strong>MAC_PCC，MAC_VLAN2</strong>)</p>
<p>IP：(<strong>192.168.2.11，192.168.3.11</strong>)</p>
</blockquote>
<h3 id="STEP-16"><a href="#STEP-16" class="headerlink" title="STEP 16"></a>STEP 16</h3><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091622334.jpg?imageMogr2/format/webp" alt="img" style="zoom:200%;" />

<blockquote>
<p>S2 收到 S1 转发的数据帧，根据其 VLAN id 和目的 MAC 地址，向 <strong>G 1/0/1</strong> 端口转发该数据帧；</p>
</blockquote>
<blockquote>
<p>同时，S2 根据端口 <strong>G 1/0/1</strong> 是 <strong>ACCESS</strong> 类型端口，去掉 VLAN 标签，从端口 <strong>G 1/0/1</strong> 转发该帧。</p>
</blockquote>
<p>这样，PCC 收到 S2 转发的包含 ICMP Echo Reply 报文的数据帧。第一轮 ICMP 询问和应答过程结束。</p>
<h2 id="子网划分设计型实验-1"><a href="#子网划分设计型实验-1" class="headerlink" title="子网划分设计型实验"></a>子网划分设计型实验</h2><p>题目不再重述，组网细节可从对题目的初步分析中得出。下附实验组网细节，老师的红笔批注共两处，第一处仅作讲解时用，第二处意为缺少详细配置指令，已经补在下面形成了完成的步骤。</p>
<img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091630845.png?imageMogr2/format/webp" alt="image-20240409163055736" style="width:80%;" />

<img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202404091632577.png?imageMogr2/format/webp" alt="image-20240409163216523" style="width:80%;" />

<!-- flag of hidden posts --></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://cookedbear.github.io">CookedBear</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://cookedbear.github.io/p/e5a0f5f9.html">https://cookedbear.github.io/p/e5a0f5f9.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://cookedbear.github.io" target="_blank">sin</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/BUAA/">BUAA</a><a class="post-meta__tags" href="/tags/Elevate/">Elevate</a></div><div class="post_share"><div class="social-share" data-image="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403251300866.jpg?imageMogr2/format/webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/p/d4de58c7.html" title="BUAA-OO-TOP"><img class="cover" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202309112056684.jpg?imageMogr2/format/webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-14</div><div class="title">BUAA-OO-TOP</div></div></a></div><div><a href="/p/1727.html" title="BUAA-OS-TOP"><img class="cover" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202306132108192.jpg?imageMogr2/format/webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-22</div><div class="title">BUAA-OS-TOP</div></div></a></div><div><a href="/p/b88d3a79.html" title="BUAA-FPGA多核并行计算-Exp3-1"><img class="cover" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403142326098.jpg?imageMogr2/format/webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-04</div><div class="title">BUAA-FPGA多核并行计算-Exp3-1</div></div></a></div><div><a href="/p/dbc82017.html" title="BUAA-X86Programming-Exp2"><img class="cover" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202402292225468.jpg?imageMogr2/format/webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-03</div><div class="title">BUAA-X86Programming-Exp2</div></div></a></div><div><a href="/p/f08030b1.html" title="BUAA-X86Programming-2"><img class="cover" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202402292225468.jpg?imageMogr2/format/webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-31</div><div class="title">BUAA-X86Programming-2</div></div></a></div><div><a href="/p/73ee4056.html" title="BUAA-SoftwareEngineering-Task5"><img class="cover" src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403130016509.jpg?imageMogr2/format/webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-31</div><div class="title">BUAA-SoftwareEngineering-Task5</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202305132152908.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">CookedBear</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">75</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/CookedBear"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CookedBear" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">ReStart</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-amp-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%AE%9E%E9%AA%8C-2"><span class="toc-number">1.</span> <span class="toc-text">数据链路层 &amp; 网络层实验 - 2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9"><span class="toc-number">2.</span> <span class="toc-text">实验内容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VLAN-TRUNK-%E5%AE%9E%E9%AA%8C"><span class="toc-number">3.</span> <span class="toc-text">VLAN TRUNK 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E"><span class="toc-number">3.1.</span> <span class="toc-text">实验说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9-1"><span class="toc-number">3.2.</span> <span class="toc-text">实验内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VLAN-TAG-%E5%AE%9E%E9%AA%8C"><span class="toc-number">4.</span> <span class="toc-text">VLAN TAG 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E-1"><span class="toc-number">4.1.</span> <span class="toc-text">实验说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9-2"><span class="toc-number">4.2.</span> <span class="toc-text">实验内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VLAN-%E9%97%B4%E9%80%9A%E4%BF%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C"><span class="toc-number">5.</span> <span class="toc-text">VLAN 间通信综合实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E-2"><span class="toc-number">5.1.</span> <span class="toc-text">实验说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">5.2.</span> <span class="toc-text">实验过程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E8%AE%BE%E8%AE%A1%E5%9E%8B%E5%AE%9E%E9%AA%8C"><span class="toc-number">6.</span> <span class="toc-text">子网划分设计型实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E-3"><span class="toc-number">6.1.</span> <span class="toc-text">实验说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B-1"><span class="toc-number">6.2.</span> <span class="toc-text">实验过程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%A3%8E%E6%9A%B4%E4%B8%8E%E7%AB%AF%E5%8F%A3%E8%81%9A%E5%90%88%E5%AE%9E%E9%AA%8C"><span class="toc-number">7.</span> <span class="toc-text">网络风暴与端口聚合实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E-4"><span class="toc-number">7.1.</span> <span class="toc-text">实验说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9-3"><span class="toc-number">7.2.</span> <span class="toc-text">实验内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E9%95%9C%E5%83%8F%E5%AE%9E%E9%AA%8C"><span class="toc-number">8.</span> <span class="toc-text">端口镜像实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E8%AF%B4%E6%98%8E-5"><span class="toc-number">8.1.</span> <span class="toc-text">实验说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%86%85%E5%AE%B9-4"><span class="toc-number">8.2.</span> <span class="toc-text">实验内容</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A"><span class="toc-number">9.</span> <span class="toc-text">数据链路层实验报告</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E9%A3%8E%E6%9A%B4-amp-%E7%AB%AF%E5%8F%A3%E8%81%9A%E5%90%88"><span class="toc-number">9.1.</span> <span class="toc-text">广播风暴 &amp; 端口聚合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E9%A3%8E%E6%9A%B4-amp-%E7%AB%AF%E5%8F%A3%E8%81%9A%E5%90%88-1"><span class="toc-number">9.2.</span> <span class="toc-text">广播风暴 &amp; 端口聚合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%BF%E6%92%AD%E9%A3%8E%E6%9A%B4-amp-%E7%AB%AF%E5%8F%A3%E8%81%9A%E5%90%88-2"><span class="toc-number">9.3.</span> <span class="toc-text">广播风暴 &amp; 端口聚合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN-TRUNK"><span class="toc-number">9.4.</span> <span class="toc-text">VLAN TRUNK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN-TRUNK-1"><span class="toc-number">9.5.</span> <span class="toc-text">VLAN TRUNK</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN-TAG"><span class="toc-number">9.6.</span> <span class="toc-text">VLAN TAG</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN-TAG-1"><span class="toc-number">9.7.</span> <span class="toc-text">VLAN TAG</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A"><span class="toc-number">10.</span> <span class="toc-text">网络层实验报告</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#VLAN-%E9%97%B4%E9%80%9A%E4%BF%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E9%AA%8C-1"><span class="toc-number">10.1.</span> <span class="toc-text">VLAN 间通信综合实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-1"><span class="toc-number">10.1.1.</span> <span class="toc-text">STEP 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-2"><span class="toc-number">10.1.2.</span> <span class="toc-text">STEP 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-3"><span class="toc-number">10.1.3.</span> <span class="toc-text">STEP 3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-4"><span class="toc-number">10.1.4.</span> <span class="toc-text">STEP 4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-5"><span class="toc-number">10.1.5.</span> <span class="toc-text">STEP 5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-6"><span class="toc-number">10.1.6.</span> <span class="toc-text">STEP 6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-7"><span class="toc-number">10.1.7.</span> <span class="toc-text">STEP 7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-8"><span class="toc-number">10.1.8.</span> <span class="toc-text">STEP 8</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#STEP-9"><span class="toc-number">10.2.</span> <span class="toc-text">STEP 9</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-10"><span class="toc-number">10.2.1.</span> <span class="toc-text">STEP 10</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-11"><span class="toc-number">10.2.2.</span> <span class="toc-text">STEP 11</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-12"><span class="toc-number">10.2.3.</span> <span class="toc-text">STEP 12</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-13"><span class="toc-number">10.2.4.</span> <span class="toc-text">STEP 13</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-14"><span class="toc-number">10.2.5.</span> <span class="toc-text">STEP 14</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-15"><span class="toc-number">10.2.6.</span> <span class="toc-text">STEP 15</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#STEP-16"><span class="toc-number">10.2.7.</span> <span class="toc-text">STEP 16</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E8%AE%BE%E8%AE%A1%E5%9E%8B%E5%AE%9E%E9%AA%8C-1"><span class="toc-number">10.3.</span> <span class="toc-text">子网划分设计型实验</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/p/b88d3a79.html" title="BUAA-FPGA多核并行计算-Exp3-1"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403142326098.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-FPGA多核并行计算-Exp3-1"/></a><div class="content"><a class="title" href="/p/b88d3a79.html" title="BUAA-FPGA多核并行计算-Exp3-1">BUAA-FPGA多核并行计算-Exp3-1</a><time datetime="2024-04-03T19:55:39.000Z" title="发表于 2024-04-04 03:55:39">2024-04-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/dbc82017.html" title="BUAA-X86Programming-Exp2"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202402292225468.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-X86Programming-Exp2"/></a><div class="content"><a class="title" href="/p/dbc82017.html" title="BUAA-X86Programming-Exp2">BUAA-X86Programming-Exp2</a><time datetime="2024-04-03T02:17:59.409Z" title="发表于 2024-04-03 10:17:59">2024-04-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/f08030b1.html" title="BUAA-X86Programming-2"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202402292225468.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-X86Programming-2"/></a><div class="content"><a class="title" href="/p/f08030b1.html" title="BUAA-X86Programming-2">BUAA-X86Programming-2</a><time datetime="2024-03-31T12:32:08.000Z" title="发表于 2024-03-31 20:32:08">2024-03-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/p/73ee4056.html" title="BUAA-SoftwareEngineering-Task5"><img src="https://cookedbear-2003-1307884465.cos.ap-beijing.myqcloud.com/NotePics/202403130016509.jpg?imageMogr2/format/webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-SoftwareEngineering-Task5"/></a><div class="content"><a class="title" href="/p/73ee4056.html" title="BUAA-SoftwareEngineering-Task5">BUAA-SoftwareEngineering-Task5</a><time datetime="2024-03-31T12:28:57.000Z" title="发表于 2024-03-31 20:28:57">2024-03-31</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By CookedBear</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer src="https://gcore.jsdelivr.net/combine/npm/jquery@latest/dist/jquery.min.js,gh/weilining/jsdelivr/jquery/circlemagic/circlemagic.min.js,gh/weilining/jsdelivr@latest/jquery/circlemagic/butterflycirclemagic.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>